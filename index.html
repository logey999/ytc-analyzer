<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ytc-analyzer</title>
<link rel="stylesheet" href="/css/report.css">
<link rel="stylesheet" href="/css/tables.css">
<link rel="stylesheet" href="/css/buttons.css">
<link rel="stylesheet" href="/css/pagination.css">
<link rel="stylesheet" href="/css/animations.css">
<link rel="stylesheet" href="/css/forms.css">
<link rel="stylesheet" href="/css/dashboard.css">
<link rel="stylesheet" href="/css/filter-settings.css">
<script src="/js/config.js"></script>
<script src="/js/utils.js"></script>
<script src="/js/filter-settings.js"></script>
</head>
<body>

<header>
  <a class="header-link" href="/">
    <div class="logo-badge">&#9654;</div>
    <div class="header-text">
      <h1>ytc-analyzer</h1>
      <span class="subtitle">YouTube Comment Analyzer</span>
    </div>
  </a>
  <nav class="header-nav">
    <a href="/" class="active">Dashboard</a>
    <a href="/aggregate">Pending <span class="nav-badge" id="nav-count-aggregate">0</span></a>
    <a href="/saved">Saved <span class="nav-badge" id="nav-count-saved">0</span></a>
    <a href="/blacklist">Blacklist <span class="nav-badge" id="nav-count-blacklist">0</span></a>
    <a href="/deleted">Deleted <span class="nav-badge" id="nav-count-deleted">0</span></a>
  </nav>
</header>

<!-- ── Analyze bar ────────────────────────────────────────────────────────── -->
<div class="analyze-bar">
  <div class="analyze-bar-label">
    Analyze Video
    <button class="settings-gear-btn" onclick="openFilterSettings()" title="Auto-Filter Settings">
      <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round">
        <circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"/>
      </svg>
    </button>
  </div>
  <input
    id="url-input"
    class="url-input"
    type="text"
    placeholder="https://youtube.com/watch?v=..."
    autocomplete="off"
    spellcheck="false"
  >
  <button id="analyze-btn" class="btn btn-primary" onclick="startAnalyze()">
    &#9654;&nbsp; Analyze
  </button>
</div>

<!-- ── Reports list ───────────────────────────────────────────────────────── -->
<div class="reports-panel">
  <div class="reports-toolbar">
    <span class="reports-toolbar-label">Sort</span>
    <button class="sort-btn sort-btn-active" data-sort="date" data-label="Date" onclick="setSort('date')">Date ↓</button>
    <button class="sort-btn" data-sort="name" data-label="Name" onclick="setSort('name')">Name</button>
  </div>
  <div id="panel-reports" class="reports-list">
    <div class="reports-empty">Loading reports…</div>
  </div>
</div>

<!-- ── Auto-Filter Settings Modal ────────────────────────────────────────── -->
<div id="filter-settings-modal" class="modal-overlay" onclick="closeFilterSettings(event)">
  <div class="modal-box">
    <div class="modal-header">
      <span class="modal-title">Auto-Filter Settings</span>
      <button class="modal-close" onclick="closeFilterSettings()">&times;</button>
    </div>
    <p class="modal-desc">Filtered comments are sent to the blacklist automatically when a video is analyzed. Settings are saved locally.</p>
    <div class="filter-list" id="filter-list"></div>
  </div>
</div>

<!-- ── Delete Report Modal ────────────────────────────────────────────────── -->
<div id="delete-report-modal" class="modal-overlay" onclick="closeDeleteReportModal(event)">
  <div class="modal-box delete-report-modal-box">
    <div class="modal-header">
      <span class="modal-title">Delete Report</span>
      <button class="modal-close" onclick="closeDeleteReportModal()">&times;</button>
    </div>
    <p class="modal-desc">
      What should happen to unclassified comments in this report?
      Comments already in Saved, Blacklist, or Deleted are not affected.
    </p>
    <div id="delete-report-title" class="delete-report-name"></div>
    <div class="delete-report-actions">
      <button class="btn btn-secondary" onclick="confirmDeleteReport('blacklist')">Send to Blacklist</button>
      <button class="btn btn-danger"    onclick="confirmDeleteReport('deleted')">Send to Deleted</button>
    </div>
    <div class="delete-report-cancel">
      <button class="btn btn-secondary" onclick="closeDeleteReportModal()">Cancel</button>
    </div>
  </div>
</div>

<script src="/js/dashboard.js"></script>
</body>
</html>
